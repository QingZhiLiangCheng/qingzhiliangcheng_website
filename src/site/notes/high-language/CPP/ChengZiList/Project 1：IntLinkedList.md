---
{"tags":["project","ChengZiList"],"dg-publish":true,"permalink":"/high-language/CPP/ChengZiList/Project 1ï¼šIntLinkedList/","dgPassFrontmatter":true,"noteIcon":"","created":"2025-04-29T16:02:27.866+08:00","updated":"2025-04-29T21:54:48.887+08:00"}
---

### Overview
åœ¨[[high-language/CPP/ChengZiList/Project 0ï¼šSimpleList\|Project 0ï¼šSimpleList]]ä¸­ ä½ å·²ç»å®ç°äº†ä¸€ä¸ªç®€å•çš„é“¾è¡¨SimpleList.
ä½†æ˜¯å¾ˆæ˜æ˜¾SimpleListå­˜åœ¨å¾ˆå¤šé—®é¢˜ ä¸‘é™‹ è‡ƒè‚¿ æ¯”å¦‚
- å¯¹äºåˆ°åº•æ˜¯ä¸€ä¸ªèŠ‚ç‚¹è¿˜æ˜¯ä¸€ä¸ªé“¾è¡¨ æœ‰ç‚¹æ¨¡ç³Šä¸æ¸…
- å¯ä»¥ç›´æ¥è®¿é—®å¹¶ä¿®æ”¹ç±»ä¸­çš„å…ƒç´ 
- sizeå‡½æ•°éœ€è¦éå†æ•´ä¸ªé“¾è¡¨
- ä¸€ç›´`.next.next` æ™¦æ¶© éš¾æ‡‚
- ....

åœ¨è¿™ä¸ªProjectä¸­, è¿™äº›é—®é¢˜éƒ½å°†å¾—åˆ°è§£å†³, æˆ‘ä»¬å°†é€šè¿‡ä¸€æ­¥ä¸€æ­¥Improvement å®ç°ä¸€ä¸ªé€‚ç”¨äºintç±»å‹æ•°æ®çš„æ›´æ¥è¿‘ç°ä»£è¯­è¨€å®ç°çš„é“¾è¡¨(ä¸è¿‡åˆ°æ­¤ä¸ºæ­¢æˆ‘ä»¬è¿˜æœªæåŠå‡½æ•°æ¨¡ç‰ˆ)

åœ¨æ­¤ä¹‹å‰ï¼Œå‡è®¾ä½ åœ¨Project 0 æ‰€å®ç°çš„é“¾è¡¨ç»“æ„å¦‚ä¸‹
```cpp
class SimpleList{
public:
	int data_;
	SimpleList* next_;
	...
};
```
é‚£ä¹ˆäº‹å®ä¸Šæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸‹çš„ä»£ç è¿›è¡Œå¤´æ’æ³•
```cpp
SimpleList simple_list = new SimpleList(1,nullptr);
simple_list = new SimpleList(2,simple_list);
```

ä¸€å®šè¦ç¡®ä¿ä½ åœ¨å†™ä»£ç ä¹‹å‰å°†é¡¹ç›®æ›´æ–°åˆ°æœ€æ–°çŠ¶æ€
```bash
git pull QingZhiLiangCheng main
```

### Improvement 1: Rebranding and Bureaucracy
ä¸éš¾å‘ç°ï¼Œäº‹å®ä¸Šä¸€ä¸ªç®€å•çš„é“¾è¡¨æ˜¯ç”±ä¸€ä¸ªä¸ªèŠ‚ç‚¹æ‰€ç»„æˆçš„, ä¸€ä¸ªå¥½çš„æ€æƒ³æ˜¯å°è£…çš„æ—¶å€™æˆ‘ä»¬è¦ç»†åŒ–åˆ°æœ€å°çš„ç»“æ„å’Œæ¨¡å—ï¼Œè¿™æ˜¯ä¸€ç§å·¥ç¨‹åŒ–çš„æ€æƒ³ï¼Œæ‰€ä»¥è¿™é‡Œä½ éœ€è¦å®ç°`IntNode`ç±»å¹¶ç”¨`IntNode`ç±»æ„æˆ`IntList`ç±»ï¼Œå¹¶ä½“ä¼šè¿™ç§æ€æƒ³çš„å¥½å¤„ã€‚


> [!todo] Task 1
> ä½ éœ€è¦åœ¨`src/int_node.h`æ–‡ä»¶ä¸­å®ç°IntNodeç±»,å¹¶åœ¨`src/int_linked_list.h`æ–‡ä»¶ä¸­å®ç°ä¸€ä¸ªIntLinkedListç±»ã€‚
> IntNodeç±»:
> - å®ç°ä¸€ä¸ªåä¸º`IntNode`çš„ç±»ï¼Œç”¨äºè¡¨ç¤ºæ•´æ•°é“¾è¡¨ä¸­çš„å•ä¸ªèŠ‚ç‚¹ã€‚
> - æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ï¼š
>     - `data`ï¼šå­˜å‚¨æ•´æ•°å€¼ã€‚
>     - `next`ï¼šæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼ˆå¯¹äºæœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¯¥å€¼åº”ä¸º`nullptr`ï¼‰
> 
> IntLinkedListÂ ç±»
> - å®ç°ä¸€ä¸ªåä¸º`IntLinkedList`ç±»ï¼Œç”¨äºç®¡ç†ç”±`IntNode`ç»„æˆçš„é“¾è¡¨
> - å®šä¹‰ä¸€ä¸ªæŒ‡å‘é“¾è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ`first_`
> - å®ç°å¿…è¦çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°
> - å®ç°AddFirstå’ŒGetFirstä¸¤ä¸ªæ–¹æ³•
> 	- `void AddFirst(int data);`
> 	- `auto GetFirst() -> int`
>
![Pasted image 20250429163242.png|500](/img/user/accessory/Pasted%20image%2020250429163242.png) 

å…¶å®å¾ˆå®¹æ˜“æˆ‘ä»¬èƒ½ä½“ä¼šåˆ°IntLinkListå’ŒSimpleListçš„åŒºåˆ« IntLinkedListæŠŠç»†èŠ‚éƒ½éšè—èµ·æ¥äº† ä»–æ›´åƒä¸€ä¸ªä¸­é—´äºº å¸®æˆ‘ä»¬è¿›å…¥æ•°æ®ç»“æ„ è¿™ä¹Ÿæ˜¯æˆ‘ä»¬è®¡ç®—æœºä¸­ä¸€ç§æŠ½è±¡å’Œæ¨¡å—åŒ–çš„æ€æƒ³ å°±æ˜¯è¯´ä½¿ç”¨è€…ä¸å¿…å†ç”¨å…¶ä¸­å®ç°çš„ç»†èŠ‚ åªéœ€è¦ä½¿ç”¨æ˜“æ‡‚çš„API åƒè¯»å¥å­ä¸€æ · è¯»æ‡‚å¥å­å°±èƒ½çœ‹æ‡‚åŠŸèƒ½ï¼ˆæ¯”å¦‚AddFirst çœ‹åˆ°å°±çŸ¥é“ä»€ä¹ˆåŠŸèƒ½ï¼‰

### Improvent 2: Public vs. Private
ä½†æ˜¯ä¸Šé¢çš„IntLinkedListä»ç„¶å­˜åœ¨é—®é¢˜ å› ä¸ºæˆ‘ä»¬å¯ä»¥ç»•è¿‡è¿™ä¸ªä¸­é—´äºº(IntLinkedList) ç›´æ¥è®¿é—®é‡Œé¢çš„naked data structure ç”šè‡³å¯ä»¥æ“æ§dataå’ŒnextåŸŸ æ¯”å¦‚`int_linked_list.first_.next_.data_=10;`
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨privateå…³é”®å­—å£°æ˜æ¥è¾¾åˆ°æƒ³è¦çš„æ•ˆæœ

> [!todo] Task 2
> å°†first_æˆå‘˜å˜é‡å£°æ˜ä¸ºprivateï¼Œé‚£ä¹ˆè¿™ä¸ªæˆå‘˜å˜é‡åªèƒ½åœ¨IntLinkedListç±»çš„æˆå‘˜å‡½æ•°ä¸­è¢«è®¿é—®å’Œä¿®æ”¹

### Improvent 3: Nested Classes
ä½ ä¼šå‘ç° äº‹å®ä¸Š IntNodeä»…ä»…æ˜¯ä¸€ä¸ªIntLinkedListçš„ä¸€ä¸ªç‰¹æ€§ IntNodeå¥½åƒå¹¶æ²¡æœ‰ä½œä¸ºä¸€ä¸ªç›´æ¥äº¤äº’çš„é¡¹ç›® å®ƒæ²¡æœ‰è‡ªå·±çš„å‡½æ•°å£°æ˜ æ›´åƒæ˜¯ä¸€ä¸ªå±æ€§
æ‰€ä»¥æˆ‘ä»¬ä¼šä½¿ç”¨åµŒå¥—ç±»(nested classed)

> [!todo] Task 3
> 1. å°†IntNodeä½œä¸ºå†…éƒ¨ç±»æ’å…¥IntLinkedListä¸­ å¹¶åˆ é™¤`src/int_node.h`æ–‡ä»¶
> 2. å®ç°AddLastå‡½æ•° `void AddLast(int data)`
> 3. å®ç°Sizeå‡½æ•° (å¦‚æœæœ‰èƒ½åŠ›å¯ä»¥è¯•ä¸€ä¸‹è¿­ä»£å’Œé€’å½’ä¸¤ç§æ–¹æ³•)

### Improvement 4: Cashing
åœ¨Improvement 3ä¸­å®ç°çš„Sizeå’ŒAddLastçš„ç¼ºç‚¹éå¸¸æ˜æ˜¾
å¦‚æœè¿­ä»£çš„è¯éœ€è¦O(n)çš„å¤æ‚åº¦ å¦‚æœé€’å½’çš„è¯ å¼€é”€å¯èƒ½ä¼šæ›´å¤§(å¯ä»¥å»ç†è§£ä¸€ä¸‹é€’å½’çš„åŸç†)
ä¸ºæ­¤ï¼Œæˆ‘ä»¬åªéœ€åœ¨ `SLList` ç±»ä¸­æ·»åŠ ä¸€ä¸ª `size_` å˜é‡æ¥è·Ÿè¸ªå½“å‰é“¾è¡¨çš„é•¿åº¦ï¼Œè¿™ç§å°†é‡è¦æ•°æ®ä¿å­˜èµ·æ¥ä»¥åŠ å¿«åç»­è®¿é—®é€Ÿåº¦çš„åšæ³•ï¼Œæœ‰æ—¶è¢«ç§°ä¸º ç¼“å­˜ï¼ˆcachingï¼‰
è¿™æ˜¯è®¡ç®—æœºä¸­ä¸€ä¸ªå…¸å‹çš„å“²å­¦æ€æƒ³: æƒè¡¡å–èˆ. è¯´ç™½äº† å°±æ˜¯æ‹¿ç€ç©ºé—´æ¢æ•ˆç‡
è¿™é‡Œå¤šè¯´å‡ å¥ ç°åœ¨è®¡ç®—æœºå‘å±•çš„æ°´å¹³æ¥è¯´ æ›´ç¼ºä¹çš„æ—¶é—´ å› ä¸ºæˆ‘ä»¬çš„å†…å­˜å’Œç¡¬ç›˜è¿˜æ˜¯è›®å¤Ÿç”¨çš„ åŸæ¥åœ¨æ‰“å­”çº¸å¸¦çš„æ—¶å€™ç®—åŠ›æ˜¯ä¸€ç§æœåŠ¡(å› ä¸ºéœ€è¦æ’é˜Ÿç”¨æœºæˆ¿çš„æœºå­) è€Œç°åœ¨ç®—åŠ›åˆæˆäº†ä¸€ç§æœåŠ¡ hhhè¿™æ˜¯å¬å—äº¬å¤§å­¦NJU jyyè€å¸ˆè¯´çš„

> [!todo] Task 4
> åŠ å…¥`size_`å˜é‡æ¥è·Ÿè¸ªé“¾è¡¨çš„é•¿åº¦
> è®°å¾—åœ¨å¯¹åº”çš„å‡½æ•°ä¸­éƒ½è¦ç»´æŠ¤`size_`

å…¶å®ä¹Ÿå¯ä»¥åŠ ä¸€ä¸ªtail_ æ¥è®°å½•å°¾èŠ‚ç‚¹ ä½†æ˜¯å…¶å®ä¼šå¼•å‘ä¸€ä¸ªé—®é¢˜ï¼ˆå…¶å®æˆ‘è§‰å¾—å¹¶ä¸æ˜¯ç‰¹åˆ«è¦ç´§ï¼‰è¿™ä¸ªé—®é¢˜å°†åœ¨[[high-language/CPP/ChengZiList/Project 2ï¼šLinkedList\|Project 2ï¼šLinkedList]]ä¸­æåˆ°

### Improvement 5: Sentinel Head Node
æˆªæ­¢åˆ°ç°åœ¨ æˆ‘çŒœä½ å·²ç»å®ç°äº†ç±»ä¼¼ä¸‹é¢çš„ä»£ç 
``` cpp
IntLinkedList():size_(0),first_(nullptr) {};

void AddLast(int data) {
	size_++;
	IntNode* p = first_;
	while(p->next != nullptr){
		p = p -> next;
	}
	p->next = new IntLinkedList(data, nullptr);
	...
}
```
è¿™ä¼šæœ‰ä¸€ä¸ªæ½œåœ¨çš„bug å°±æ˜¯å½“å»ºç«‹ç©º`int_linked_list`çš„æ—¶å€™å†è°ƒç”¨AddLast ä¼šæŠ¥é”™ å› ä¸ºåœ¨`p->next`çš„æ—¶å€™`first_`æ˜¯nullptr
æ‰€ä»¥æˆ‘ä»¬è¦è¿›è¡Œç‰¹æ®Šåˆ¤æ–­ be like
```cpp
void AddLast(int x){
	size_++;
	if(size_==0){
		first_=new IntNode(x,nullptr);
		return;
	}
	IntNode* p = first_;
	while(p->next != nullptr){
		p = p -> next;
	}
	p->next = new IntLinkedList(data, nullptr);
}
```

é—®é¢˜æ˜¯ åŠ ä¸Šç‰¹æ®Šæƒ…å†µåˆ¤æ–­å¯èƒ½æ˜¾å¾—ä»£ç å˜å¾—å¤æ‚ å†—é•¿
è€Œä¸”æ¯å½“æˆ‘ä»¬å¢åŠ åŠŸèƒ½çš„æ—¶å€™ å¯èƒ½éƒ½è¦åŠ ä¸Šæˆ–å¤šæˆ–å°‘çš„ç‰¹æ®Šæƒ…å†µåˆ¤æ–­ è€Œä¸”å¯èƒ½åœ¨bugå‡ºç°ä¹‹å‰æˆ‘ä»¬å¹¶ä¸èƒ½æ„è¯†åˆ°è¿™é‡Œå­˜åœ¨ç‰¹æ®Šæƒ…å†µ
æ‰€ä»¥ä¸€ç§æ›´å¥½çš„æ–¹å¼ æ˜¯ä½¿ç”¨æœ‰è™šæ‹Ÿå¤´ç»“ç‚¹çš„é“¾è¡¨

> [!todo] Task 5
> åœ¨åŸæœ‰åŸºç¡€ä¸Š å®ç°æœ‰è™šæ‹Ÿå¤´ç»“ç‚¹çš„é“¾è¡¨ å¹¶åœ¨å¿…è¦çš„å‡½æ•°ä¸­è¿›è¡Œç»´æŠ¤

### æµ‹è¯•å¹¶æäº¤è‡ªå·±gitä»“åº“
**è¿è¡Œæµ‹è¯•**
ä½ éœ€è¦å…ˆå‰å¾€`test/int_linked_list_test`ä¸­å°†ifdefå’Œendifæ ‡ç­¾å»æ‰
ä½ å¯ä»¥ä½¿ç”¨æµ‹è¯•æ¡†æ¶æµ‹è¯• æˆ‘ä»¬å°†GTestç”¨äºå•å…ƒæµ‹è¯•ç”¨ä¾‹ ä½ å¯ä»¥ä»å‘½ä»¤è¡Œå•ç‹¬ç¼–è¯‘å’Œè¿è¡Œæ¯ä¸€ä¸ªæµ‹è¯•(å¦‚æœæ‚¨æ˜¯Ubantuçš„è¯)
```bash
cd build
make int_linked_list_test -j
./test/int_linked_list_test
```
åœ¨CLionä¸­é…ç½®è¿è¡Œè°ƒè¯•é…ç½®å¤„ é…ç½® `int_linked_list_test` ç‚¹å‡»è¿è¡Œä¹Ÿå¯ä»¥
è¿è¡Œé€šè¿‡å³æ„å‘³ç€Project 1é€šè¿‡å•¦ ğŸ¥°
**æäº¤æ‚¨çš„ä»£ç **
æ‚¨å¯ä»¥å°†è‡ªå·±çš„ä»£ç æäº¤åˆ°è‡ªå·±çš„gitä»“åº“ ä¸è¦æäº¤åˆ°æˆ‘çš„gitä»“åº“å•Š
```shell
git push origin main
```